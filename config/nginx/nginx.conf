server {
    listen 8001;
    # TODO: Different depending on built for testing server or production server
    # server_name monitoring.localzero.net;
    server_name monitoring-test.localzero.net;

    auth_basic "Derzeit im Aufbau. Bitte ein wenig Geduld.";
    auth_basic_user_file conf.d/htpasswd;

    client_max_body_size 100m;

    location / {
        # pass requests for dynamic content to gunicorn
        proxy_pass http://djangoapp:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    location /static {
        # fetch static resources from volume shared with django app
        alias /cpmonitor/static;
    }

    location /images {
        # fetch image resources from volume shared with django app
        alias /cpmonitor/images;
    }

    # TODO: Only disallow crawling of test environment; allow on prod.
    location =/robots.txt {
        alias /cpmonitor/static/robots.txt;
    }
}
